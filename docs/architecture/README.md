# 架构设计文档

## 目录结构
```
src/
├── components/        # 公共组件
├── pages/            # 页面组件
├── services/         # API 服务
├── types/            # 类型定义
├── utils/            # 工具函数
└── routes/           # 路由配置
```

## 页面路由

### 登录页面 (`/login`)
- **路径**: `/src/pages/Login`
- **功能**:
  - 手机号输入和验证
  - 发送验证码
  - 导航到验证码页面
- **状态管理**:
  - 手机号验证状态
  - 发送验证码倒计时

### 验证码页面 (`/verification`)
- **路径**: `/src/pages/Verification`
- **功能**:
  - 验证码输入和验证
  - 根据用户状态导航到不同页面
    - 新用户 → 设置昵称页面
    - 老用户 → 首页
- **状态管理**:
  - 验证码输入状态
  - 验证结果处理

### 设置昵称页面 (`/set-nickname`)
- **路径**: `/src/pages/SetNickname`
- **功能**:
  - 昵称输入和设置
  - 更新用户信息
  - 导航到首页
- **状态管理**:
  - 昵称输入状态
  - 表单验证

### 首页 (`/home`)
- **路径**: `/src/pages/Home`
- **功能**:
  - 显示用户信息
  - 生成分享链接
  - 登录状态检查
- **状态管理**:
  - 用户信息
  - URL 参数处理
  - 分享链接生成

## 状态管理

### 本地存储
- **工具类**: `/src/utils/storage.ts`
- **功能**:
  - 用户登录状态管理
  - 手机号存储和获取
  - 登录状态检查

### 路由状态
- **类型定义**: `/src/types/route.ts`
- **功能**:
  - 路由状态类型定义
  - URL 参数处理工具
  - 查询字符串构建

## 数据流

1. **登录流程**:
   ```
   输入手机号 → 发送验证码 → 验证码验证 → 
   新用户：设置昵称 → 首页
   老用户：直接进入首页
   ```

2. **状态持久化**:
   ```
   验证成功 → 存储手机号 → 
   后续访问：检查登录状态 → 自动导航
   ```

3. **信息分享**:
   ```
   用户信息 → URL 参数构建 → 
   生成分享链接 → 访问者查看
   ``` 